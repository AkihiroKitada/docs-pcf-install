<p class="note"><strong>Note</strong>: Enabling CredHub is not required. However, you cannot leave the fields under <b>Encryption Keys</b> blank.
If you do not intend to use CredHub, enter any text in the <b>Name</b> and <b>Key</b> fields as placeholder values.</p>

1. Select **CredHub**.
1. Choose the location of your CredHub database. PAS includes this CredHub database for services to store their service instance credentials.
<%= image_tag("images/credhub-db.png") %>
If you chose **External**, enter the following:
	* **Hostname**: The IP address of the Google Cloud SQL instance that you created in [Step 6: Create Database Instance and Databases](./gcp-prepare-env.html#dbs) of the _Preparing to Deploy PCF on GCP_ topic. You can obtain this address from the Instances dashboard of the **SQL** configuration page in the GCP Console. 
	* **TCP Port**: The port of your database server, `3306`. 
	* **Username**: The username that can access this specific database on the database server. You created users in [Preparing to Deploy PCF on GCP](./gcp-prepare-env.html#dbs). 
	* **Password**: The password for the provided username. 
	* **Database CA Certificate**: The certificate used for encrypting traffic to and from the database.
1. (Optional) To configure CredHub to use an HSM, complete the following fields:
  * **HSM Provider Partition**: The name of the HSM provider partition.
  * **HSM Provider Partition Password**: The password used to access the HSM provider partition.
  * **HSM Provider Client Certificate**: The client certificate for the HSM. For more information, see [Create and Register HSM Clients](hsm-config.html#create-register-hsm) in the _Preparing CredHub HSMs for Configuration_ topic.
  <%= image_tag("images/hsm-provider.png") %>
  * In the **HSM Provider Servers** section, click **Add** to add an HSM server. You can add multiple HSM servers. For each HSM server, complete the following fields:
      * **Host Address**: The host name or IP address of the HSM server.
      * **Port**: The port of the HSM server. If you do not know your port address, enter `1792`.
      * **Partition Serial Number**: The serial number of the HSM partition.
      * **HSM Certificate**: The certificate for the HSM server. The HSM presents this certificate to CredHub to establish a two-way TLS connection.
1. Under **Encryption Keys**, specify one or more keys to use for encrypting and decrypting the values stored in the CredHub database.
	* **Name**: The name of the encryption key.
	* **Provider**: The provider of the encryption key.
	If you have configured an HSM provider and HSM servers above, select **HSM**. Otherwise, select **Internal**.
	* **Key**: The encryption key for encrypting all data. The key must be at least 20 characters long.
	* **Primary**: The checkbox for marking this key as the primary encryption key.
		<p class="note"><strong>Note</strong>: Ensure that you mark only one key as <b>Primary</b>. For more information about using additional keys for key rotation, see the [Rotating Runtime CredHub Encryption Keys](../opsguide/credential-rotation.html) topic.</p>
1. If your deployment uses any PCF services that support storing service instance credentials in CredHub and you want to enable this feature, select the **Secure Service Instance Credentials** checkbox.
1. Click **Save**.
1. Select the **Resource Config** pane.
1. Under the **Job** column of the **CredHub** row, set the number of instances to `2`. This is the minimum instance count required for high availability.
1. Click **Save**.

For more information about using CredHub for securing service instance credentials, see <a href="../opsguide/secure-si-creds.html">Securing Service Instance Credentials with Runtime CredHub</a>.</p>
